<body class="focus-tail"><h1 operator="" id="styles">Styles</h1><p>Neomacs manages a collection of <i>styles</i> named by symbols. A style is either a mixin defined with <code>defstyle</code> or a style sheet defined with <code>defsheet</code>. A mixin specify a collection of CSS attributes, and a style sheet map CSS selectors to CSS attributes. Styles can inherit from each other. A buffer can include a list of style sheets (via buffer's <code>styles</code> slot), which are compiled to CSS and injected into the renderer. Neomacs automatically updates affected CSS if any style is changed because of redefinition or <code>set-style</code>.</p><p>Format of mixin style (<code>defstyle</code>) spec: <code>({block | :key value}*)</code>, where each block has the format <code>(selector {block | :key value}*)</code></p><p>Format of sheet style (<code>defsheet</code>) spec: <code>(block*)</code></p><p>Above <code>:key</code>'s are either CSS attribute names, or <code>:inherit</code>, in which case <code>value</code> should name a style which would be expanded in place.</p><dl><dt>Macro: <code>defstyle</code> <code>(symbol spec &amp;optional doc)</code></dt><dd>Define a style named by SYMBOL.</dd><dd>This also exports SYMBOL from current package.</dd><dt>Macro: <code>defsheet</code> <code>(symbol spec &amp;optional doc)</code></dt><dd>Define a style sheet named by SYMBOL.</dd><dd>This also exports SYMBOL from current package.</dd><dt>Variable: <code>*styles*</code></dt><dd>List of all known styles.</dd><dt>Function: <code>set-style</code> <code>(&amp;rest bindings)</code></dt><dd>Set styles or style sheets according to BINDINGS.</dd><dd>BINDINGS should be of the form {SYMBOL SPEC}*, and style or style
sheet named by each SYMBOL is set to SPEC.</dd><dd>Example: (set-style 'default '(:font-family &quot;sans-serif&quot;)
    'bold '(:font-weight 900))</dd><dd>SYMBOL is allowed to take some special value:</dd><dd>:native-theme -- SPEC should be one of &quot;system&quot;,&quot;dark&quot; and &quot;light&quot;. This sets the color theme used by the renderer.</dd><dt>Function: <code>css-cell</code> <code>(symbol)</code></dt><dd>Return the cell that stores the compiled CSS of the style sheet named
by SYMBOL.</dd><dd>Can be <code>cell-ref</code>ed to get the up-to-date CSS string for the style
named by SYMBOL.</dd></dl><h2 id="mounting-assets-directories">Mounting assets directories</h2><p>The renderer processes don't have direct access to your file system. To use local assets in the renderer (in HTML, CSS, JavaScript, etc), mount them under the <code>neomacs</code> protocol scheme.</p><dl><dt>Function: <code>mount-asset</code> <code>(host path)</code></dt><dd>Mount files under PATH to neomacs://HOST/.</dd></dl><p>By default, <code>neomacs://sys/</code> is mounted to assets that come with Neomacs and <code>neomacs://user/</code> is mounted to <code>(uiop:xdg-config-home &quot;neomacs/assets/&quot;)</code> (usually located at <code>~/.config/neomacs/assets/</code> on Unix-like systems). For example, <code>neomacs://user/1.png</code> would access <code>~/.config/neomacs/assets/1.png</code>. <code>neomacs://contents/</code> is reserved for internal use (currently, <code>file-mode</code> use it to serve temporarily generated HTML).</p><h2 id="themes">Themes</h2><dl><dt>Command: <code>apply-theme</code> <code>(theme)</code></dt><dd>Apply THEME.</dd><dt>Macro: <code>define-theme</code> <code>(name doc &amp;body bindings)</code></dt><dd>Define a theme with NAME.</dd><dd>BINDINGS are passed as arguments to <code>set-style</code> to apply the theme.</dd><dt>Variable: <code>*themes*</code></dt><dd>List of all known themes</dd></dl></body>